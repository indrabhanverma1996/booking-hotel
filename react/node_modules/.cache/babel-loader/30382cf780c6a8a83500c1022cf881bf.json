{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\hotel101-hotel-bookings-laravel-react\\\\frontend\\\\src\\\\Components\\\\AdminDashboard\\\\RoomManagement\\\\EditRoomForm.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getRoom } from \"../../../redux/actions/rooms\";\nimport { updateRoom } from \"../../../redux/actions/rooms\";\nimport { getAllHotels } from \"../../../redux/actions/hotels\";\nimport { setSuccess } from \"../../../redux/actions/global\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport Tags from \"@yaireo/tagify/dist/react.tagify\"; // React-wrapper file\n\nimport \"@yaireo/tagify/dist/tagify.css\"; //\n\nfunction EditRoomForm() {\n  const dispatch = useDispatch();\n  const state = useSelector(state => state);\n  let {\n    id\n  } = useParams();\n  const [room, setRoom] = useState({\n    name: \"\",\n    description: \"\",\n    price: \"\",\n    guest: \"\",\n    hotel_id: \"\"\n  });\n  const [image, setImage] = useState(null);\n  const [features, setFeatures] = useState([]);\n  useEffect(() => {\n    getRoom(dispatch, id);\n    getAllHotels(dispatch, state.auth.token);\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    state.rooms.room && setRoom(state.rooms.room);\n\n    let _features = state.rooms.room && state.rooms.room.features.map(e => {\n      return e.name;\n    });\n\n    state.rooms.room && setFeatures(_features);\n\n    try {\n      let images = state.rooms.room && state.rooms.room.image.split(\",\");\n      state.rooms.room && setImage(images[0]);\n    } catch (error) {}\n  }, [state.rooms.room]); // eslint-disable-line\n\n  useEffect(() => {\n    setRoom({ ...room,\n      hotel_id: state.hotels.allHotels[0] ? state.hotels.allHotels[0].id : 0\n    });\n  }, [state.hotels.allHotels]); // eslint-disable-line\n\n  const onSubmitHandler = e => {\n    e.preventDefault();\n\n    let _features;\n\n    _features = JSON.parse(features);\n    _features = _features && _features.map(feature => feature.value);\n    const formData = new FormData();\n    formData.append(\"_method\", \"PUT\");\n    formData.append(\"id\", id);\n    formData.append(\"name\", room.name);\n    formData.append(\"description\", room.description);\n    formData.append(\"price\", room.price);\n    formData.append(\"guest\", room.guest);\n    formData.append(\"hotel_id\", room.hotel_id);\n    formData.append(\"features\", JSON.stringify(_features));\n\n    for (const key of Object.keys(image)) {\n      image && formData.append(`image[${key}]`, image[key]);\n    }\n\n    updateRoom(dispatch, formData, state.auth.token);\n  };\n\n  let history = useHistory();\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setSuccess(dispatch, null);\n\n      if (state.rooms.success) {\n        history.push(\"/room-management\");\n      }\n    }, 3000);\n    return () => clearTimeout(timer);\n  }, [state.rooms.success]); // eslint-disable-line\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full md:w-6/12 xl:w-8/12 md:ml-5 bg-gray-200 p-5 rounded-sm  \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-xl font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, \"Edit Room\"), /*#__PURE__*/React.createElement(\"form\", {\n    action: \"\",\n    className: \"mt-5 bg-gray-300 p-5 rounded-sm \",\n    onSubmit: onSubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"first_name\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, \"Add at least 3 images:\", \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: room && room.image && typeof image === \"string\" ? `${process.env.REACT_APP_BASE_URL}/img/rooms/${image}` : \"http://placehold.it/300x300?text=room image\",\n    alt: \"room\",\n    className: \"w-32 h-32 rounded-sm object-cover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"ml-5 px-5 py-2 text-gray-200 bg-orange-500 hover:bg-orange-900 rounded-sm cursor-pointer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"test\",\n    className: \"hidden\",\n    onChange: e => {\n      setImage(e.target.files);\n    },\n    multiple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-camera mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, image && typeof image === \"object\" ? Object.keys(image).map(function (key, index) {\n    return image[key].name + \", \";\n  }) : \"Upload\"))), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, \"Room Name:\", \" \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    className: \"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\",\n    value: room.name,\n    onChange: e => setRoom({ ...room,\n      name: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"description\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, \"Room Description:\", \" \"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\",\n    value: room.description,\n    onChange: e => setRoom({ ...room,\n      description: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"address\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, \"Hotel:\", \" \"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"\",\n    id: \"\",\n    className: \"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\",\n    value: room.hotel_id,\n    onChange: e => setRoom({ ...room,\n      hotel_id: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, state && state.hotels.allHotels.map(hotel => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: hotel.id,\n      value: hotel.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 33\n      }\n    }, hotel.name);\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"guest\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, \"Room Guests:\", \" \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"guest\",\n    className: \"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\",\n    value: room.guest,\n    onChange: e => setRoom({ ...room,\n      guest: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"price\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, \"Room Price:\", \" \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"price\",\n    className: \"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\",\n    value: room.price,\n    onChange: e => setRoom({ ...room,\n      price: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, \"Features: \"), /*#__PURE__*/React.createElement(Tags, {\n    className: \"features p-2 bg-white w-full xl:w-1/2  border border-gray-400 focus:outline-none\\r focus:border-black\",\n    value: features,\n    onChange: e => {\n      setFeatures(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"text-center bg-yellow-600 text-white hover:bg-yellow-700 uppercase text-sm px-6 py-2 shadow\\r hover:shadow-lg block mt-5\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  }, \"Update Room\")));\n}\n\nexport default EditRoomForm;","map":{"version":3,"sources":["C:/xampp/htdocs/hotel101-hotel-bookings-laravel-react/frontend/src/Components/AdminDashboard/RoomManagement/EditRoomForm.js"],"names":["React","useState","useEffect","useDispatch","useSelector","getRoom","updateRoom","getAllHotels","setSuccess","useParams","useHistory","Tags","EditRoomForm","dispatch","state","id","room","setRoom","name","description","price","guest","hotel_id","image","setImage","features","setFeatures","auth","token","rooms","_features","map","e","images","split","error","hotels","allHotels","onSubmitHandler","preventDefault","JSON","parse","feature","value","formData","FormData","append","stringify","key","Object","keys","history","timer","setTimeout","success","push","clearTimeout","process","env","REACT_APP_BASE_URL","target","files","index","hotel"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getRoom } from \"../../../redux/actions/rooms\";\r\nimport { updateRoom } from \"../../../redux/actions/rooms\";\r\nimport { getAllHotels } from \"../../../redux/actions/hotels\";\r\nimport { setSuccess } from \"../../../redux/actions/global\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport Tags from \"@yaireo/tagify/dist/react.tagify\"; // React-wrapper file\r\nimport \"@yaireo/tagify/dist/tagify.css\"; //\r\n\r\nfunction EditRoomForm() {\r\n    const dispatch = useDispatch();\r\n    const state = useSelector((state) => state);\r\n    let { id } = useParams();\r\n\r\n    const [room, setRoom] = useState({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        guest: \"\",\r\n        hotel_id: \"\"\r\n    });\r\n    const [image, setImage] = useState(null);\r\n    const [features, setFeatures] = useState([]);\r\n    useEffect(() => {\r\n        getRoom(dispatch, id);\r\n        getAllHotels(dispatch, state.auth.token);\r\n    }, []); // eslint-disable-line\r\n\r\n    useEffect(() => {\r\n        state.rooms.room && setRoom(state.rooms.room);\r\n        let _features =\r\n            state.rooms.room &&\r\n            state.rooms.room.features.map((e) => {\r\n                return e.name;\r\n            });\r\n\r\n        state.rooms.room && setFeatures(_features);\r\n\r\n        try {\r\n            let images = state.rooms.room && state.rooms.room.image.split(\",\");\r\n            state.rooms.room && setImage(images[0]);\r\n        } catch (error) {}\r\n    }, [state.rooms.room]); // eslint-disable-line\r\n\r\n    useEffect(() => {\r\n        setRoom({\r\n            ...room,\r\n            hotel_id: state.hotels.allHotels[0]\r\n                ? state.hotels.allHotels[0].id\r\n                : 0\r\n        });\r\n    }, [state.hotels.allHotels]); // eslint-disable-line\r\n    const onSubmitHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        let _features;\r\n        _features = JSON.parse(features);\r\n        _features = _features && _features.map((feature) => feature.value);\r\n        const formData = new FormData();\r\n        formData.append(\"_method\", \"PUT\");\r\n\r\n        formData.append(\"id\", id);\r\n        formData.append(\"name\", room.name);\r\n        formData.append(\"description\", room.description);\r\n        formData.append(\"price\", room.price);\r\n        formData.append(\"guest\", room.guest);\r\n        formData.append(\"hotel_id\", room.hotel_id);\r\n        formData.append(\"features\", JSON.stringify(_features));\r\n        for (const key of Object.keys(image)) {\r\n            image && formData.append(`image[${key}]`, image[key]);\r\n        }\r\n\r\n        updateRoom(dispatch, formData, state.auth.token);\r\n    };\r\n\r\n    let history = useHistory();\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setSuccess(dispatch, null);\r\n            if (state.rooms.success) {\r\n                history.push(\"/room-management\");\r\n            }\r\n        }, 3000);\r\n        return () => clearTimeout(timer);\r\n    }, [state.rooms.success]); // eslint-disable-line\r\n\r\n    return (\r\n        <div className=\"w-full md:w-6/12 xl:w-8/12 md:ml-5 bg-gray-200 p-5 rounded-sm  \">\r\n            <h2 className=\"text-xl font-semibold\">Edit Room</h2>\r\n\r\n            <form\r\n                action=\"\"\r\n                className=\"mt-5 bg-gray-300 p-5 rounded-sm \"\r\n                onSubmit={onSubmitHandler}\r\n            >\r\n                <label htmlFor=\"first_name\" className=\"block mt-5\">\r\n                    Add at least 3 images:{\" \"}\r\n                </label>\r\n                <div className=\"flex items-center mt-5\">\r\n                    <img\r\n                        src={\r\n                            room && room.image && typeof image === \"string\"\r\n                                ? `${process.env.REACT_APP_BASE_URL}/img/rooms/${image}`\r\n                                : \"http://placehold.it/300x300?text=room image\"\r\n                        }\r\n                        alt=\"room\"\r\n                        className=\"w-32 h-32 rounded-sm object-cover\"\r\n                    />\r\n\r\n                    <label className=\"ml-5 px-5 py-2 text-gray-200 bg-orange-500 hover:bg-orange-900 rounded-sm cursor-pointer\">\r\n                        <input\r\n                            type=\"file\"\r\n                            id=\"test\"\r\n                            className=\"hidden\"\r\n                            onChange={(e) => {\r\n                                setImage(e.target.files);\r\n                            }}\r\n                            multiple\r\n                        />\r\n                        <i className=\"fas fa-camera mr-2\"></i>\r\n                        <span>\r\n                            {image && typeof image === \"object\"\r\n                                ? Object.keys(image).map(function (key, index) {\r\n                                      return image[key].name + \", \";\r\n                                  })\r\n                                : \"Upload\"}\r\n                        </span>\r\n                    </label>\r\n                </div>\r\n\r\n                <label htmlFor=\"name\" className=\"block mt-5\">\r\n                    Room Name:{\" \"}\r\n                </label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    className=\"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\"\r\n                    value={room.name}\r\n                    onChange={(e) => setRoom({ ...room, name: e.target.value })}\r\n                />\r\n\r\n                <label htmlFor=\"description\" className=\"block mt-5\">\r\n                    Room Description:{\" \"}\r\n                </label>\r\n                <textarea\r\n                    className=\"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\"\r\n                    value={room.description}\r\n                    onChange={(e) =>\r\n                        setRoom({ ...room, description: e.target.value })\r\n                    }\r\n                ></textarea>\r\n\r\n                <label htmlFor=\"address\" className=\"block mt-5\">\r\n                    Hotel:{\" \"}\r\n                </label>\r\n\r\n                <select\r\n                    name=\"\"\r\n                    id=\"\"\r\n                    className=\"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\"\r\n                    value={room.hotel_id}\r\n                    onChange={(e) =>\r\n                        setRoom({ ...room, hotel_id: e.target.value })\r\n                    }\r\n                >\r\n                    {state &&\r\n                        state.hotels.allHotels.map((hotel) => {\r\n                            return (\r\n                                <option key={hotel.id} value={hotel.id}>\r\n                                    {hotel.name}\r\n                                </option>\r\n                            );\r\n                        })}\r\n                </select>\r\n\r\n                <label htmlFor=\"guest\" className=\"block mt-5\">\r\n                    Room Guests:{\" \"}\r\n                </label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"guest\"\r\n                    className=\"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\"\r\n                    value={room.guest}\r\n                    onChange={(e) =>\r\n                        setRoom({ ...room, guest: e.target.value })\r\n                    }\r\n                />\r\n\r\n                <label htmlFor=\"price\" className=\"block mt-5\">\r\n                    Room Price:{\" \"}\r\n                </label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"price\"\r\n                    className=\"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\"\r\n                    value={room.price}\r\n                    onChange={(e) =>\r\n                        setRoom({ ...room, price: e.target.value })\r\n                    }\r\n                />\r\n                <label className=\"block mt-5\">Features: </label>\r\n\r\n                <Tags\r\n                    className=\"features p-2 bg-white w-full xl:w-1/2  border border-gray-400 focus:outline-none\r\n                    focus:border-black\"\r\n                    value={features}\r\n                    onChange={(e) => {\r\n                        setFeatures(e.target.value);\r\n                    }}\r\n                />\r\n                <button\r\n                    className=\"text-center bg-yellow-600 text-white hover:bg-yellow-700 uppercase text-sm px-6 py-2 shadow\r\n                    hover:shadow-lg block mt-5\"\r\n                    type=\"submit\"\r\n                >\r\n                    Update Room\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EditRoomForm;\r\n"]},"metadata":{},"sourceType":"module"}