{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\hotel101-hotel-bookings-laravel-react\\\\frontend\\\\src\\\\Components\\\\Book\\\\BookForm.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { addBooking } from \"../../redux/actions/bookings\";\nimport { setSuccess } from \"../../redux/actions/global\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport BookingDetails from \"./BookingDetails\";\nimport PaymentForm from \"./PaymentForm\";\nimport Border from \"../Global/Border\";\nimport Loading from \"../Global/Loading\";\nimport ErrorMessage from \"../Global/ErrorMessage\";\nimport SuccessMessage from \"../Global/SuccessMessage\";\nimport useSecureLs from \"../Global/useSecureLs\";\n\nfunction BookForm() {\n  const dispatch = useDispatch();\n  const state = useSelector(state => state);\n  const [user_id] = useSecureLs(\"user_id\");\n  const [room_id] = useSecureLs(\"room_id\");\n  const [booking, setBooking] = useState({\n    full_name: [\"\", \"\"],\n    number: \"\",\n    exp_month: \"\",\n    exp_year: \"\",\n    cvc: \"\",\n    check_in: \"\",\n    check_out: \"\",\n    user_id,\n    room_id,\n    amount: 0\n  });\n\n  const maxLengthCheck = e => {\n    if (e.target.value.length > e.target.maxLength) {\n      e.target.value = e.target.value.slice(0, e.target.maxLength);\n    }\n  };\n\n  const onSubmitHandler = e => {\n    e.preventDefault();\n    addBooking(dispatch, booking, state.auth.token);\n  };\n\n  let history = useHistory();\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setSuccess(dispatch, null);\n\n      if (state.bookings.success) {\n        history.push(`/user-bookings/${booking.user_id}`);\n      }\n    }, 2000);\n    return () => clearTimeout(timer);\n  }, [state.bookings.success]); // eslint-disable-line\n\n  useEffect(() => {\n    document.title = `Book Your Hotel`;\n  }, []); // eslint-disable-line\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col items-center text-gray-800 lg:my-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, state.bookings.loading && /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 40\n    }\n  }), state.bookings.success === false && /*#__PURE__*/React.createElement(ErrorMessage, {\n    errors: state.bookings.errors,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }), state.bookings.success && /*#__PURE__*/React.createElement(SuccessMessage, {\n    message: \"Success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 40\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-gray-300 p-5 lg:w-7/12 border border-gray-400 rounded-sm \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(BookingDetails, {\n    booking: booking,\n    setBooking: setBooking,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Border, {\n    borderColor: \"border-gray-500\",\n    my: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(PaymentForm, {\n    booking: booking,\n    setBooking: setBooking,\n    maxLengthCheck: maxLengthCheck,\n    onSubmitHandler: onSubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Border, {\n    borderColor: \"border-gray-500\",\n    my: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default BookForm;","map":{"version":3,"sources":["C:/xampp/htdocs/hotel101-hotel-bookings-laravel-react/frontend/src/Components/Book/BookForm.js"],"names":["React","useState","useEffect","addBooking","setSuccess","useSelector","useDispatch","useHistory","BookingDetails","PaymentForm","Border","Loading","ErrorMessage","SuccessMessage","useSecureLs","BookForm","dispatch","state","user_id","room_id","booking","setBooking","full_name","number","exp_month","exp_year","cvc","check_in","check_out","amount","maxLengthCheck","e","target","value","length","maxLength","slice","onSubmitHandler","preventDefault","auth","token","history","timer","setTimeout","bookings","success","push","clearTimeout","document","title","loading","errors"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { addBooking } from \"../../redux/actions/bookings\";\r\nimport { setSuccess } from \"../../redux/actions/global\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport BookingDetails from \"./BookingDetails\";\r\nimport PaymentForm from \"./PaymentForm\";\r\nimport Border from \"../Global/Border\";\r\nimport Loading from \"../Global/Loading\";\r\nimport ErrorMessage from \"../Global/ErrorMessage\";\r\nimport SuccessMessage from \"../Global/SuccessMessage\";\r\nimport useSecureLs from \"../Global/useSecureLs\";\r\n\r\nfunction BookForm() {\r\n    const dispatch = useDispatch();\r\n    const state = useSelector((state) => state);\r\n    const [user_id] = useSecureLs(\"user_id\");\r\n    const [room_id] = useSecureLs(\"room_id\");\r\n\r\n    const [booking, setBooking] = useState({\r\n        full_name: [\"\", \"\"],\r\n        number: \"\",\r\n        exp_month: \"\",\r\n        exp_year: \"\",\r\n        cvc: \"\",\r\n        check_in: \"\",\r\n        check_out: \"\",\r\n        user_id,\r\n        room_id,\r\n        amount: 0\r\n    });\r\n\r\n    const maxLengthCheck = (e) => {\r\n        if (e.target.value.length > e.target.maxLength) {\r\n            e.target.value = e.target.value.slice(0, e.target.maxLength);\r\n        }\r\n    };\r\n\r\n    const onSubmitHandler = (e) => {\r\n        e.preventDefault();\r\n        addBooking(dispatch, booking, state.auth.token);\r\n    };\r\n\r\n    let history = useHistory();\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setSuccess(dispatch, null);\r\n            if (state.bookings.success) {\r\n                history.push(`/user-bookings/${booking.user_id}`);\r\n            }\r\n        }, 2000);\r\n        return () => clearTimeout(timer);\r\n    }, [state.bookings.success]); // eslint-disable-line\r\n\r\n    useEffect(() => {\r\n        document.title = `Book Your Hotel`;\r\n    }, []); // eslint-disable-line\r\n    return (\r\n        <div className=\"flex flex-col items-center text-gray-800 lg:my-8\">\r\n            {state.bookings.loading && <Loading />}\r\n            {state.bookings.success === false && (\r\n                <ErrorMessage errors={state.bookings.errors} />\r\n            )}\r\n            {state.bookings.success && <SuccessMessage message=\"Success\" />}\r\n            <div className=\"bg-gray-300 p-5 lg:w-7/12 border border-gray-400 rounded-sm \">\r\n                <BookingDetails booking={booking} setBooking={setBooking} />\r\n                <Border borderColor=\"border-gray-500\" my=\"8\" />\r\n                <PaymentForm\r\n                    booking={booking}\r\n                    setBooking={setBooking}\r\n                    maxLengthCheck={maxLengthCheck}\r\n                    onSubmitHandler={onSubmitHandler}\r\n                />\r\n                <Border borderColor=\"border-gray-500\" my=\"8\" />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BookForm;\r\n"]},"metadata":{},"sourceType":"module"}