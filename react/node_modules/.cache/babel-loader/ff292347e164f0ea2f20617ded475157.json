{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\project\\\\react\\\\src\\\\Components\\\\AdminDashboard\\\\RoomManagement\\\\AddRoomForm.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addRoom } from \"../../../redux/actions/rooms\";\nimport { getAllHotels } from \"../../../redux/actions/hotels\";\nimport { setSuccess } from \"../../../redux/actions/global\";\nimport { useHistory } from \"react-router-dom\";\nimport Tagify from \"@yaireo/tagify\";\nimport \"@yaireo/tagify/dist/tagify.css\";\n\nfunction AddRoomForm() {\n  const dispatch = useDispatch();\n  const state = useSelector(state => state);\n  const [room, setRoom] = useState({\n    name: \"\",\n    description: \"\",\n    price: \"\",\n    guest: \"\",\n    hotel_id: \"\",\n    features: []\n  });\n  const [image, setImage] = useState(\"\");\n  useEffect(() => {\n    getAllHotels(dispatch, state.auth.token);\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    setRoom({ ...room,\n      hotel_id: state.hotels.allHotels[0] ? state.hotels.allHotels[0].id : 0\n    });\n  }, [state.hotels.allHotels]); // eslint-disable-line\n\n  let history = useHistory();\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setSuccess(dispatch, null);\n\n      if (state.rooms.success) {\n        history.push(\"/room-management\");\n      }\n    }, 3000);\n    return () => clearTimeout(timer);\n  }, [state.rooms.success]); // eslint-disable-line\n\n  useEffect(() => {\n    var input = document.querySelector(\".features\"),\n        // eslint-disable-next-line\n    tagify = new Tagify(input, {\n      whitelist: [\"MASTER BEDROOMS\", \"POOL & SPA\", \"WIFI COVERAGE\", \"HOT TUB\"],\n      dropdown: {\n        classname: \"color-blue\",\n        enabled: 0,\n        // show the dropdown immediately on focus\n        maxItems: 5,\n        position: \"text\",\n        // place the dropdown near the typed text\n        closeOnSelect: false,\n        // keep the dropdown open after selecting a suggestion\n        highlightFirst: true\n      }\n    });\n  }, []); // eslint-disable-line\n\n  const onSubmitHandler = e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"name\", room.name);\n    formData.append(\"description\", room.description);\n    formData.append(\"price\", room.price);\n    formData.append(\"guest\", room.guest);\n    formData.append(\"hotel_id\", room.hotel_id);\n    formData.append(\"features\", JSON.stringify(room.features));\n\n    for (const key of Object.keys(image)) {\n      image && formData.append(`image[${key}]`, image[key]);\n    }\n\n    addRoom(dispatch, formData, state.auth.token);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full md:w-6/12 xl:w-8/12 md:ml-5 bg-gray-200 p-5 rounded-sm  \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-xl font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, \"Add Room\"), /*#__PURE__*/React.createElement(\"form\", {\n    action: \"\",\n    className: \"mt-5 bg-gray-300 p-5 rounded-sm \",\n    onSubmit: onSubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"first_name\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \"Add at least 3 images:\", \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: room && room.image ? `${process.env.REACT_APP_BASE_URL}/img/rooms/${room.image}` : \"http://placehold.it/300x300?text=room image\",\n    alt: \"room\",\n    className: \"w-32 h-32 rounded-sm object-cover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"ml-5 px-5 py-2 text-gray-200 bg-orange-500 hover:bg-orange-900 rounded-sm cursor-pointer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"test\",\n    className: \"hidden\",\n    onChange: e => {\n      setImage(e.target.files);\n    },\n    multiple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-camera mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, image ? Object.keys(image).map(function (key) {\n    return image[key].name + \", \";\n  }) : \"Upload\"))), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, \"Room Name:\", \" \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    className: \"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\",\n    value: room.name,\n    onChange: e => setRoom({ ...room,\n      name: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"description\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, \"Room Description:\", \" \"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\",\n    value: room.description,\n    onChange: e => setRoom({ ...room,\n      description: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"address\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, \"Hotel:\", \" \"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"\",\n    id: \"\",\n    className: \"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\",\n    value: room.hotel_id,\n    onChange: e => setRoom({ ...room,\n      hotel_id: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, state && state.hotels.allHotels.map(hotel => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: hotel.id,\n      value: hotel.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 33\n      }\n    }, hotel.name);\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"guest\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, \"Room Guests:\", \" \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"guest\",\n    className: \"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\",\n    value: room.guest,\n    onChange: e => setRoom({ ...room,\n      guest: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"price\",\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, \"Room Price:\", \" \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"price\",\n    className: \"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\",\n    value: room.price,\n    onChange: e => setRoom({ ...room,\n      price: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }\n  }, \"Features: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"features\",\n    className: \"features p-2 bg-white w-full xl:w-1/2  border border-gray-400 focus:outline-none\\r focus:border-black\",\n    value: room.features,\n    onChange: e => {\n      setRoom({ ...room,\n        features: JSON.parse(e.target.value).map(feature => feature.value)\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"text-center bg-yellow-600 text-white hover:bg-yellow-700 uppercase text-sm px-6 py-2 shadow\\r hover:shadow-lg block mt-5\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, \"Add Room\")));\n}\n\nexport default AddRoomForm;","map":{"version":3,"sources":["C:/xampp/htdocs/project/react/src/Components/AdminDashboard/RoomManagement/AddRoomForm.js"],"names":["React","useState","useEffect","useDispatch","useSelector","addRoom","getAllHotels","setSuccess","useHistory","Tagify","AddRoomForm","dispatch","state","room","setRoom","name","description","price","guest","hotel_id","features","image","setImage","auth","token","hotels","allHotels","id","history","timer","setTimeout","rooms","success","push","clearTimeout","input","document","querySelector","tagify","whitelist","dropdown","classname","enabled","maxItems","position","closeOnSelect","highlightFirst","onSubmitHandler","e","preventDefault","formData","FormData","append","JSON","stringify","key","Object","keys","process","env","REACT_APP_BASE_URL","target","files","map","value","hotel","parse","feature"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addRoom } from \"../../../redux/actions/rooms\";\r\nimport { getAllHotels } from \"../../../redux/actions/hotels\";\r\nimport { setSuccess } from \"../../../redux/actions/global\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Tagify from \"@yaireo/tagify\";\r\nimport \"@yaireo/tagify/dist/tagify.css\";\r\n\r\nfunction AddRoomForm() {\r\n    const dispatch = useDispatch();\r\n    const state = useSelector((state) => state);\r\n\r\n    const [room, setRoom] = useState({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        guest: \"\",\r\n        hotel_id: \"\",\r\n        features: []\r\n    });\r\n\r\n    const [image, setImage] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        getAllHotels(dispatch, state.auth.token);\r\n    }, []); // eslint-disable-line\r\n\r\n    useEffect(() => {\r\n        setRoom({\r\n            ...room,\r\n            hotel_id: state.hotels.allHotels[0]\r\n                ? state.hotels.allHotels[0].id\r\n                : 0\r\n        });\r\n    }, [state.hotels.allHotels]); // eslint-disable-line\r\n\r\n    let history = useHistory();\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setSuccess(dispatch, null);\r\n            if (state.rooms.success) {\r\n                history.push(\"/room-management\");\r\n            }\r\n        }, 3000);\r\n        return () => clearTimeout(timer);\r\n    }, [state.rooms.success]); // eslint-disable-line\r\n\r\n    useEffect(() => {\r\n        var input = document.querySelector(\".features\"), // eslint-disable-next-line\r\n            tagify = new Tagify(input, {\r\n                whitelist: [\r\n                    \"MASTER BEDROOMS\",\r\n                    \"POOL & SPA\",\r\n                    \"WIFI COVERAGE\",\r\n                    \"HOT TUB\"\r\n                ],\r\n                dropdown: {\r\n                    classname: \"color-blue\",\r\n                    enabled: 0, // show the dropdown immediately on focus\r\n                    maxItems: 5,\r\n                    position: \"text\", // place the dropdown near the typed text\r\n                    closeOnSelect: false, // keep the dropdown open after selecting a suggestion\r\n                    highlightFirst: true\r\n                }\r\n            });\r\n    }, []); // eslint-disable-line\r\n\r\n    const onSubmitHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"name\", room.name);\r\n        formData.append(\"description\", room.description);\r\n        formData.append(\"price\", room.price);\r\n        formData.append(\"guest\", room.guest);\r\n        formData.append(\"hotel_id\", room.hotel_id);\r\n        formData.append(\"features\", JSON.stringify(room.features));\r\n        for (const key of Object.keys(image)) {\r\n            image && formData.append(`image[${key}]`, image[key]);\r\n        }\r\n        addRoom(dispatch, formData, state.auth.token);\r\n    };\r\n    return (\r\n        <div className=\"w-full md:w-6/12 xl:w-8/12 md:ml-5 bg-gray-200 p-5 rounded-sm  \">\r\n            <h2 className=\"text-xl font-semibold\">Add Room</h2>\r\n            <form\r\n                action=\"\"\r\n                className=\"mt-5 bg-gray-300 p-5 rounded-sm \"\r\n                onSubmit={onSubmitHandler}\r\n            >\r\n                <label htmlFor=\"first_name\" className=\"block mt-5\">\r\n                    Add at least 3 images:{\" \"}\r\n                </label>\r\n                <div className=\"flex items-center mt-5\">\r\n                    <img\r\n                        src={\r\n                            room && room.image\r\n                                ? `${process.env.REACT_APP_BASE_URL}/img/rooms/${room.image}`\r\n                                : \"http://placehold.it/300x300?text=room image\"\r\n                        }\r\n                        alt=\"room\"\r\n                        className=\"w-32 h-32 rounded-sm object-cover\"\r\n                    />\r\n\r\n                    <label className=\"ml-5 px-5 py-2 text-gray-200 bg-orange-500 hover:bg-orange-900 rounded-sm cursor-pointer\">\r\n                        <input\r\n                            type=\"file\"\r\n                            id=\"test\"\r\n                            className=\"hidden\"\r\n                            onChange={(e) => {\r\n                                setImage(e.target.files);\r\n                            }}\r\n                            multiple\r\n                        />\r\n                        <i className=\"fas fa-camera mr-2\"></i>\r\n                        <span>\r\n                            {image\r\n                                ? Object.keys(image).map(function (key) {\r\n                                      return image[key].name + \", \";\r\n                                  })\r\n                                : \"Upload\"}\r\n                        </span>\r\n                    </label>\r\n                </div>\r\n\r\n                <label htmlFor=\"name\" className=\"block mt-5\">\r\n                    Room Name:{\" \"}\r\n                </label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    className=\"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\"\r\n                    value={room.name}\r\n                    onChange={(e) => setRoom({ ...room, name: e.target.value })}\r\n                />\r\n\r\n                <label htmlFor=\"description\" className=\"block mt-5\">\r\n                    Room Description:{\" \"}\r\n                </label>\r\n                <textarea\r\n                    className=\"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\"\r\n                    value={room.description}\r\n                    onChange={(e) =>\r\n                        setRoom({ ...room, description: e.target.value })\r\n                    }\r\n                ></textarea>\r\n\r\n                <label htmlFor=\"address\" className=\"block mt-5\">\r\n                    Hotel:{\" \"}\r\n                </label>\r\n\r\n                <select\r\n                    name=\"\"\r\n                    id=\"\"\r\n                    className=\"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\"\r\n                    value={room.hotel_id}\r\n                    onChange={(e) =>\r\n                        setRoom({ ...room, hotel_id: e.target.value })\r\n                    }\r\n                >\r\n                    {state &&\r\n                        state.hotels.allHotels.map((hotel) => {\r\n                            return (\r\n                                <option key={hotel.id} value={hotel.id}>\r\n                                    {hotel.name}\r\n                                </option>\r\n                            );\r\n                        })}\r\n                </select>\r\n\r\n                <label htmlFor=\"guest\" className=\"block mt-5\">\r\n                    Room Guests:{\" \"}\r\n                </label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"guest\"\r\n                    className=\"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\"\r\n                    value={room.guest}\r\n                    onChange={(e) =>\r\n                        setRoom({ ...room, guest: e.target.value })\r\n                    }\r\n                />\r\n\r\n                <label htmlFor=\"price\" className=\"block mt-5\">\r\n                    Room Price:{\" \"}\r\n                </label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"price\"\r\n                    className=\"p-2 w-full xl:w-1/2 border border-gray-400 focus:outline-none focus:border-black\"\r\n                    value={room.price}\r\n                    onChange={(e) =>\r\n                        setRoom({ ...room, price: e.target.value })\r\n                    }\r\n                />\r\n                <label className=\"block mt-5\">Features: </label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"features\"\r\n                    className=\"features p-2 bg-white w-full xl:w-1/2  border border-gray-400 focus:outline-none\r\n                    focus:border-black\"\r\n                    value={room.features}\r\n                    onChange={(e) => {\r\n                        setRoom({\r\n                            ...room,\r\n                            features: JSON.parse(e.target.value).map(\r\n                                (feature) => feature.value\r\n                            )\r\n                        });\r\n                    }}\r\n                />\r\n                <button\r\n                    className=\"text-center bg-yellow-600 text-white hover:bg-yellow-700 uppercase text-sm px-6 py-2 shadow\r\n                    hover:shadow-lg block mt-5\"\r\n                    type=\"submit\"\r\n                >\r\n                    Add Room\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AddRoomForm;\r\n"]},"metadata":{},"sourceType":"module"}